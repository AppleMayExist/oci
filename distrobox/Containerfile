FROM registry.fedoraproject.org/fedora-toolbox:latest

COPY root /

RUN ln -s /usr/bin/host-spawn /usr/bin/flatpak && \
    ln -s /usr/bin/host-spawn /usr/bin/podman && \
    rpmkeys --import https://gitlab.com/paulcarroty/vscodium-deb-rpm-repo/-/raw/master/pub.gpg && \
    dnf upgrade -y && \
    dnf install -y cmake codium golang meson pkgconfig\({alsa,glib-2.0,libsecret-1,openssl}\) pipx pnpm reuse && \
    dnf clean -y all && \
    curl -fsSL https://deno.land/install.sh | DENO_INSTALL=/usr sh
